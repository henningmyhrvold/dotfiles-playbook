[Unit]
Description=MCP Obsidian Server
After=network-online.target docker.service
Wants=network-online.target

[Service]
Type=exec
RemainAfterExit=yes
WorkingDirectory={{ mcp_obsidian_dir }}
ExecStart=/usr/bin/docker compose --ansi never --progress plain \
  --project-directory {{ mcp_obsidian_dir }} \
  --file docker-compose.mcp-obsidian.yml up -d
ExecStop=/usr/bin/docker compose --ansi never --progress plain \
  --project-directory {{ mcp_obsidian_dir }} \
  --file docker-compose.mcp-obsidian.yml down
Restart=on-failure
RestartSec=3

[Install]
WantedBy=default.target
