---
# MCP GitHub Role - Self-contained
# Runs MCP GitHub server in Docker

mcp_owner: "{{ target_user | default(ansible_user_id) }}"
mcp_home: "/home/{{ mcp_owner }}"

# =============================================================================
# Docker Prerequisites
# =============================================================================
mcp_docker_packages:
  - docker
  - docker-compose

# =============================================================================
# Directory Configuration
# =============================================================================
mcp_base_dir: "{{ mcp_home }}/.config"
mcp_github_dir: "{{ mcp_base_dir }}/mcp-github"

mcp_folders:
  - "{{ mcp_base_dir }}"
  - "{{ mcp_github_dir }}"
  - "{{ mcp_home }}/.config/systemd/user"

# =============================================================================
# GitHub Token (from environment)
# =============================================================================
github_token: "{{ lookup('env', 'GITHUB_TOKEN') }}"

# =============================================================================
# Docker Configuration
# =============================================================================
mcp_github_container_name: "mcp-github"
mcp_github_image: "node:20-alpine"
mcp_network_mode: "bridge"
mcp_docker_network: "mcp-network"

# NPM package
mcp_github_npm_package: "@modelcontextprotocol/server-github"

# =============================================================================
# Systemd Configuration
# =============================================================================
mcp_github_service_name: "mcp-github.service"
mcp_enable_lingering: true
mcp_compose_pull_policy: "missing"
