---
# Claude Desktop Wayland Role - Self-contained
# Installs Claude Desktop with Wayland support

claude_desktop_user: "{{ target_user | default(ansible_facts['user_id']) }}"
claude_desktop_home: "/home/{{ claude_desktop_user }}"

# =============================================================================
# Package Installation
# =============================================================================
claude_desktop_aur_packages:
  - claude-desktop-native

# =============================================================================
# Directory Configuration
# =============================================================================
claude_desktop_config_dir: "{{ claude_desktop_home }}/.config/Claude"

claude_desktop_folders:
  - "{{ claude_desktop_config_dir }}"

# =============================================================================
# Desktop Entry Configuration
# =============================================================================
# Choose whether to enable Wayland native mode
claude_desktop_wayland_enabled: true

# Electron flags for Wayland
claude_desktop_wayland_flags:
  - "--enable-features=UseOzonePlatform"
  - "--ozone-platform=wayland"

# Desktop file paths
claude_desktop_system_desktop_file: "/usr/share/applications/claude-desktop.desktop"
claude_desktop_user_desktop_file: "{{ claude_desktop_home }}/.local/share/applications/claude-desktop.desktop"

# =============================================================================
# MCP Filesystem Configuration
# =============================================================================
filesystem_allowed_directories:
  - "{{ claude_desktop_home }}/src/dotfiles"
  - "{{ claude_desktop_home }}/src/dotfiles-playbook"

# NPM registry for the MCP server package
filesystem_server_package: "@modelcontextprotocol/server-filesystem"

# Whether to handle invalid JSON gracefully
claude_handle_invalid_json: true
claude_backup_config: true
