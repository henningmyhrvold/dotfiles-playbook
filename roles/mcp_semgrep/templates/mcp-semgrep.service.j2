[Unit]
Description=MCP Semgrep Security Scanner
After=network-online.target docker.service
Wants=network-online.target

[Service]
Type=exec
RemainAfterExit=yes
WorkingDirectory={{ mcp_semgrep_dir }}
ExecStart=/usr/bin/docker compose --ansi never --progress plain \
  --project-directory {{ mcp_semgrep_dir }} \
  --file docker-compose.mcp-semgrep.yml up -d
ExecStop=/usr/bin/docker compose --ansi never --progress plain \
  --project-directory {{ mcp_semgrep_dir }} \
  --file docker-compose.mcp-semgrep.yml down
Restart=on-failure
RestartSec=3

[Install]
WantedBy=default.target
